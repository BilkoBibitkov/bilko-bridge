MEMORY LOG:
- Always use 'set -e' in bash scripts to fail fast.
- Never use backslashes for variables in Cloud Build YAML (use $$VAR).
- API Keys must be stripped of whitespace before use.
- Do not guess model names. Read 'active_model.txt' (generated by probe.sh) to find the correct Model ID.
- If a 404 occurs, it means the Model ID is wrong for the API version, not that the key is invalid.
- Use the 'gcr.io/bilkobibitkov/firebase' builder for hosting deployments.
- Base Docker images (like 'ubuntu', 'node', 'python') are minimal and often lack system tools. Always explicitly run 'apt-get install -y curl' (or git, etc.) before trying to use them in a script.
- Bash syntax error "unexpected end of file" implies a missing closing keyword. Always pair 'if' with 'fi', 'do' with 'done', and check for closing quotes.